<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    <style>
        #tomato {
            font-size: 120px;
        }
    </style>
</head>

<body>
    <div id="tomato">
        üçÖ
    </div>

    
    <div>
        <audio id="timeup" src="./media/zapsplat_multimedia_male_voice_processed_says_you_win_001_21572.mp3">
        </audio>
    </div>


    <div id="buttons">
        <button id='start' onclick='start()'>Start</button>
        <button id='reset' onclick='reset()'>Reset</button>

        [Pause] 
      
    </div>
    <div id="clock">

    </div>
    <script>

        let secondsRemaining = 5;
        const tickDelay = 1000;
        let clock;

        function tick() {
            secondsRemaining -= 1;
            if (secondsRemaining >= 0) {
                updateClock();
                setTimeout(tick, tickDelay);
            } else {
                play_single_sound()

            }
        }

        function start() {
            setTimeout(tick, tickDelay);
        }

        function play_single_sound() {
            document.getElementById('timeup').play();
        }

        function updateClock() {
            clock = document.getElementById('clock');
            var countDownFormated = '';
            var mins = Math.floor(secondsRemaining / 60);
            var secs = secondsRemaining % 60;

            countDownFormated += "" + mins + ":" + (secs < 10 ? "0" : "");
            countDownFormated += "" + secs;
            clock.textContent = countDownFormated;

            if (secondsRemaining === 0) {

                toggleBlink();
            }

        }
        function toggleBlink() {
            if (secondsRemaining >= 0) {
                console.log(secondsRemaining);
                setInterval(function () {
                clock.style.color = (clock.style.color == 'white' ? 'red' : 'white');
            }, 500);
            } else {
                clock.style.color = 'black';
            }
            
        }

        updateClock();

function reset() {
    toggleBlink();
    secondsRemaining = 5;
     
}

    </script>
</body>

</html>